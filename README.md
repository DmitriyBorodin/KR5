# Интеграция с API hh.ru и работа с базой данных PostgreSQL

## Описание проекта
Этот проект предназначен для получения данных о компаниях и вакансиях с сайта hh.ru с использованием публичного API, создания структуры базы данных PostgreSQL для хранения этих данных, а также разработки методов взаимодействия с базой данных для анализа и обработки информации.

Проект включает:
- Получение данных о работодателях и вакансиях через API hh.ru.
- Создание таблиц в базе данных PostgreSQL.
- Загрузка данных в базу данных.
- Инструменты для анализа данных: поиск вакансий, расчет средней зарплаты, фильтрация вакансий.

## Основной функционал

### Интеграция с API hh.ru
- Получение данных о работодателях и вакансиях с использованием библиотеки `requests`.
- Обработка данных и сохранение их в формате, подходящем для загрузки в базу данных.

### Работа с базой данных PostgreSQL
- Автоматическое создание базы данных и таблиц:
  - **Таблица работодателей**: хранит информацию о компаниях.
  - **Таблица вакансий**: связана с таблицей работодателей через внешний ключ (FK).
- Загрузка данных о компаниях и вакансиях в базу данных.
- Исключение дублирования данных при вставке.

### Класс `DBManager`
Реализует методы для работы с данными в базе:
- **`get_companies_and_vacancies_count()`**  
  Возвращает список всех компаний и количество вакансий у каждой компании.
- **`get_all_vacancies()`**  
  Возвращает список всех вакансий с указанием названия компании, названия вакансии, зарплаты и ссылки на вакансию.
- **`get_avg_salary()`**  
  Вычисляет и возвращает среднюю зарплату по вакансиям.
- **`get_vacancies_with_higher_salary()`**  
  Возвращает список вакансий с зарплатой выше средней.
- **`get_vacancies_with_keyword(keyword)`**  
  Возвращает вакансии, в названии которых содержится указанное ключевое слово.

### Интерфейс пользователя
- Ввод поисковых запросов для сбора данных о вакансиях.
- Вывод статистики:
  - Список компаний и количество вакансий у них.
  - Список всех вакансий с детализацией.
  - Средняя зарплата.
  - Вакансии с зарплатой выше средней.
  - Вакансии, содержащие ключевое слово в названии.
 
### Основные технологии
- Python 3.9+
- PostgreSQL
- Библиотеки: requests, psycopg2, dotenv

## Установка и запуск

### Шаг 1. Установите зависимости
Проект использует Python и PostgreSQL. Установите зависимости с помощью команды:
```bash
pip install -r requirements.txt
```

## Установка

1. Скачайте модули проекта:
   
   ```
   git clone https://github.com/your_username/your_project.git
   ```

2. Установите Poetry, если у вас его еще нет:
   
   ```
   pip install poetry
   ```

3. Установите необходимые зависимости, указанные в файле pyproject.toml:
   
   ```
   poetry install
   ```

4. Создайте файл database.ini и укажите в нем параметры подключения к PostgreSQL, например:
   
   ```
   [postgresql]
   host=localhost
   user=postgres
   password=your_password
   port=5432
   ```

## Запуск

1. Запустите программу:
   
   ```
   poetry run python main.py
   ```

2. Программа начнет собирать данные о вакансиях от интересующих вас компаний с сайта hh.ru и сохранит их в базу данных.
